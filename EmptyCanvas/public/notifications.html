<!DOCTYPE html>
<html lang="en">
<head>
  <link rel="manifest" href="/manifest.webmanifest" />
  <meta name="theme-color" content="#ffffff" />

  <link rel="icon" href="/icons/icon-192.png" />
  <link rel="apple-touch-icon" href="/icons/icon-192.png" />

  <meta name="apple-mobile-web-app-capable" content="yes" />
  <meta name="mobile-web-app-capable" content="yes" />

  <script src="/pwa-register.js" defer></script>

  <meta charset="utf-8" />
  <meta content="width=device-width, initial-scale=1.0" name="viewport" />
  <title>Notifications</title>

  <!-- CRITICAL: Prevent sidebar links flash before CSS/permissions load -->
  <style>
    body.permissions-loading .sidebar li { display: none !important; }
  </style>

  <link href="/css/style.css" rel="stylesheet" />
  <link href="/css/ui-redesign.css" rel="stylesheet" />
  <link href="/css/notifications.css" rel="stylesheet" />
  <script src="https://unpkg.com/feather-icons"></script>
</head>

<body class="permissions-loading">
  <script>
    (function() {
      try {
        if (window.innerWidth > 768 && localStorage.getItem('ui.sidebarMini') === '1') {
          document.body.classList.add('sidebar-mini');
        }
      } catch(e) {}
    })();
  </script>

  <div class="app-container">
    <aside class="sidebar">
      <div class="sidebar-header">
        <h2>Dashboard</h2>
        <button aria-expanded="true" aria-label="Toggle sidebar" class="sidebar-toggle" id="sidebar-toggle">
          <i data-feather="chevrons-left"></i>
        </button>
      </div>

      <nav class="sidebar-nav">
        <ul class="nav-list">
          <li><a class="nav-link" href="/home"><i data-feather="home"></i><span class="nav-label">Home</span></a></li>
          <li><a class="nav-link" href="/orders"><i data-feather="list"></i><span class="nav-label">Current Orders</span></a></li>
          <li><a class="nav-link" href="/orders/requested"><i data-feather="users"></i><span class="nav-label">Operations Orders</span></a></li>
          <li><a class="nav-link" href="/orders/new"><i data-feather="plus-circle"></i><span class="nav-label">Create New Order</span></a></li>
          <li><a class="nav-link" href="/stocktaking"><i data-feather="archive"></i><span class="nav-label">Stocktaking</span></a></li>
          <li><a class="nav-link" href="/orders/sv-orders"><i data-feather="award"></i><span class="nav-label">S.V schools orders</span></a></li>
          <li><a class="nav-link" href="/expenses"><i data-feather="dollar-sign"></i><span class="nav-label">Expenses</span></a></li>
          <li><a class="nav-link" href="/expenses/users"><i data-feather="users"></i><span class="nav-label">Expenses Users</span></a></li>
          <li><a class="nav-link" href="/b2b"><i data-feather="folder"></i><span class="nav-label">B2B</span></a></li>
          <li><a class="nav-link" href="/tasks"><i data-feather="check-square"></i><span class="nav-label">Tasks</span></a></li>
        </ul>
      </nav>

      <div class="sidebar-footer">
        <button class="logout-btn" id="logoutBtn"><i data-feather="log-out"></i> Logout</button>
      </div>
    </aside>

    <div class="main-content">
      <header class="main-header">
        <div class="header-row1">
          <div class="left">
            <div class="searchbar" id="notifications-searchbar" role="search">
              <i data-feather="search"></i>
              <input id="notifSearch" type="search" placeholder="Search" aria-label="Search notifications" />
            </div>
          </div>

          <div class="right topbar-right">
            <a class="account-mini" href="/account" title="My account" aria-label="My account">
              <span class="ico-circle"><img src="/images/logo.png" alt="Logo" /></span>
              <span class="label">My account</span>
            </a>
          </div>
        </div>

        <div class="header-row2">
          <h1 class="page-title">Notifications</h1>
        </div>
      </header>

      <main class="container-full-width notifications-root" data-no-auto-busy>
        <div class="notif-page-bg">
          <section class="notif-center" aria-label="Notification Center">
            <div class="notif-center__inner">
              <div class="notif-center__top">
                <div class="notif-center__title">AI Notification Center</div>
                <button type="button" class="notif-center__seeall" id="notifSeeAllBtn">See All</button>
              </div>

              <div class="notif-tabs" role="tablist" aria-label="Notification sorting">
                <button type="button" class="notif-tab is-active" data-tab="today" role="tab" aria-selected="true">Today</button>
                <button type="button" class="notif-tab" data-tab="week" role="tab" aria-selected="false">This Week</button>
                <button type="button" class="notif-tab" data-tab="earlier" role="tab" aria-selected="false">Earlier</button>
              </div>

              <div class="notif-list" id="notifCenterList" aria-live="polite">
                <div class="notif-center-empty">Loadingâ€¦</div>
              </div>
            </div>
          </section>
        </div>
      </main>
    </div>
  </div>

  <script>feather.replace();</script>
  <script src="/js/common-ui.js"></script>
  <script src="/js/notifications.js"></script>
</body>
</html>
